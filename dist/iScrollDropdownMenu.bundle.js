!function(t){function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var e={};n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=5)}([function(t,n,e){"use strict";function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}();!function(t){var n="iScrollDropdownMenu",e=t.fn[n],s={startAtItem:0},a=function(){function n(e,o){i(this,n),this.config=this._getConfig(o),this.element=e,this.$element=t(this.element),this.$scroller=this.$element.find(".scroller"),this.iScroll,this.$ul=this.$scroller.find("> ul"),this.$items=this.$ul.find(">li"),this.$itemsDropdowns=this.$items.filter(".dropdown"),this.$dropdownMenus=this.$itemsDropdowns.find(".dropdown-menu"),this.$dropdownMenusWrapper,this.$startItem=this.$ul.find("li:eq("+this.config.startAtItem+")"),this.$indicator=this.$element.find(".indicator"),this.init()}return r(n,[{key:"init",value:function(){var n=this;this.$itemsDropdowns.each(function(){var n="item"+t(this).index();t(this).data("id",n).attr("data-id",n),t(this).find(".dropdown-menu").data("parent",n).attr("data-id",n)}),this.$dropdownMenusWrapper=t('<div class="iScrollDropdownMenu-dropdowns"></div>'),this.$element.after(this.$dropdownMenusWrapper),this.$dropdownMenusWrapper.append(this.$dropdownMenus),this.$dropdownMenus.find("[data-toggle=close]").each(function(){t(this).on("click",function(){t(this).closest(".dropdown-menu").slideUp()})}),setTimeout(function(){n.$scroller.width(n.getItemsWidth()),n.iScroll=new IScroll(n.element,{eventPassthrough:!0,scrollX:!0,scrollY:!1,preventDefault:!1,bounceEasing:"quadratic",snap:!1}),n.iScroll.scrollToElement(n.$startItem.get(0),125),n.toggleIndicator(),t(window).on("resize",function(){n.toggleIndicator()}),n.indicatorLoopAnimation(10,500),n.iScroll.on("scrollStart",function(){n.$indicator.fadeOut()})},500),this.$items.on("click",function(){t(this).find("> a").trigger("click")}),this.$items.find("> a").on("click",function(e){e.preventDefault(),e.stopPropagation(),n.$dropdownMenusWrapper.find("div").hide();var i=t(this).parent("li");if(n.iScroll.scrollToElement(i.get(0),500),n.$items.removeClass("beforeActive"),n.$items.not(i).removeClass("active"),i.prev().addClass("beforeActive"),i.addClass("active"),i.hasClass("dropdown")){var o=i.data("id");n.$dropdownMenusWrapper.find("div[data-id="+o+"]").slideDown()}else location.href=this.href})}},{key:"toggleIndicator",value:function(){this.iScroll.hasHorizontalScroll?this.$indicator.show():this.$indicator.hide()}},{key:"indicatorLoopAnimation",value:function(n,e){var i=this;this.$indicator.find(".fa").animate({right:"+="+n},e,function(){t(this).animate({right:"-="+n},e,function(){i.indicatorLoopAnimation(n,e)})})}},{key:"getItemsWidth",value:function(){var n=0;return this.$items.each(function(){n+=t(this).outerWidth()}),n}},{key:"_getConfig",value:function(n){return n=t.extend({},s,n)}}],[{key:"_jQueryInterface",value:function(e){return this.each(function(){var i=t(this),r=i.data("iScrollDropdownMenu"),a=t.extend({},s,i.data(),"object"===(void 0===e?"undefined":o(e))&&e);if(!r&&/dispose/.test(e)&&this.dispose(),r||(r=new n(this,a),i.data("iScrollDropdownMenu",r)),"string"==typeof e){if(void 0===r[e])throw new Error('No method named "'+e+'"');r[e]()}})}}]),n}();t.fn[n]=a._jQueryInterface,t.fn[n].Constructor=a,t.fn[n].noConflict=function(){return t.fn[n]=e,a._jQueryInterface}}(jQuery)},function(t,n,e){t.exports=e.p+"demo-basic.css"},function(t,n,e){t.exports=e.p+"demo-pink.css"},function(t,n,e){t.exports=e.p+"demo-purple.css"},function(t,n,e){t.exports=e.p+"iScrollDropdownMenu.css"},function(t,n,e){e(0),e(4),e(1),e(2),t.exports=e(3)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaVNjcm9sbERyb3Bkb3duTWVudS5idW5kbGUuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIGRkMzJiYjgyNjAxNmI3MzViZTE0Iiwid2VicGFjazovLy8uL3NyYy9pU2Nyb2xsRHJvcGRvd25NZW51LmpzIiwid2VicGFjazovLy8uL3NyYy9kZW1vLWJhc2ljLnNjc3MiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RlbW8tcGluay5zY3NzIiwid2VicGFjazovLy8uL3NyYy9kZW1vLXB1cnBsZS5zY3NzIiwid2VicGFjazovLy8uL3NyYy9pU2Nyb2xsRHJvcGRvd25NZW51LnNjc3MiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJjYWxsIiwibSIsImMiLCJ2YWx1ZSIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl90eXBlb2YiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm9iaiIsImNvbnN0cnVjdG9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsIndyaXRhYmxlIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiJCIsIk5BTUUiLCJKUVVFUllfTk9fQ09ORkxJQ1QiLCJmbiIsImRlZmF1bHRzIiwic3RhcnRBdEl0ZW0iLCJpU2Nyb2xsRHJvcGRvd25NZW51IiwiZWxlbWVudCIsImNvbmZpZyIsInRoaXMiLCJfZ2V0Q29uZmlnIiwiJGVsZW1lbnQiLCIkc2Nyb2xsZXIiLCJmaW5kIiwiaVNjcm9sbCIsIiR1bCIsIiRpdGVtcyIsIiRpdGVtc0Ryb3Bkb3ducyIsImZpbHRlciIsIiRkcm9wZG93bk1lbnVzIiwiJGRyb3Bkb3duTWVudXNXcmFwcGVyIiwiJHN0YXJ0SXRlbSIsIiRpbmRpY2F0b3IiLCJpbml0Iiwic2VsZiIsImVhY2giLCJpdGVtSWQiLCJpbmRleCIsImRhdGEiLCJhdHRyIiwiYWZ0ZXIiLCJhcHBlbmQiLCJvbiIsImNsb3Nlc3QiLCJzbGlkZVVwIiwic2V0VGltZW91dCIsIndpZHRoIiwiZ2V0SXRlbXNXaWR0aCIsIklTY3JvbGwiLCJldmVudFBhc3N0aHJvdWdoIiwic2Nyb2xsWCIsInNjcm9sbFkiLCJwcmV2ZW50RGVmYXVsdCIsImJvdW5jZUVhc2luZyIsInNuYXAiLCJzY3JvbGxUb0VsZW1lbnQiLCJ0b2dnbGVJbmRpY2F0b3IiLCJ3aW5kb3ciLCJpbmRpY2F0b3JMb29wQW5pbWF0aW9uIiwiZmFkZU91dCIsInRyaWdnZXIiLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwiaGlkZSIsIiRsaVBhcmVudCIsInBhcmVudCIsInJlbW92ZUNsYXNzIiwibm90IiwicHJldiIsImFkZENsYXNzIiwiaGFzQ2xhc3MiLCJzbGlkZURvd24iLCJsb2NhdGlvbiIsImhyZWYiLCJoYXNIb3Jpem9udGFsU2Nyb2xsIiwic2hvdyIsIm9mZnNldCIsImR1cmF0aW9uIiwiYW5pbWF0ZSIsInJpZ2h0IiwiaXRlbXNXaWR0aCIsIm91dGVyV2lkdGgiLCJleHRlbmQiLCIkdGhpcyIsIl9raWtvbyIsInRlc3QiLCJkaXNwb3NlIiwidW5kZWZpbmVkIiwiRXJyb3IiLCJfalF1ZXJ5SW50ZXJmYWNlIiwibm9Db25mbGljdCIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFF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QyxPQUNZLGdCQUFsQixLQUFPcEIsRUFBUCxZQUFBdkIsRUFBT3VCLEtBQXVCQSxFQVlsQyxLQVRLb0IsR0FBUSxVQUFVK0MsS0FBS25FLElBQ3hCQyxLQUFLbUUsVUFHSmhELElBQ0RBLEVBQU8sR0FBSXRCLEdBQW9CRyxLQUFNaUUsR0FDckNELEVBQU03QyxLQTlJTCxzQkE4SW9CQSxJQUdILGdCQUFYcEIsR0FBcUIsQ0FDNUIsT0FBcUJxRSxLQUFqQmpELEVBQUtwQixHQUNMLEtBQU0sSUFBSXNFLE9BQUosb0JBQThCdEUsRUFBOUIsSUFFVm9CLEdBQUtwQixZQXhKV0YsSUFvS2hDTixHQUFFRyxHQUFHRixHQUFRSyxFQUFvQnlFLGlCQUNqQy9FLEVBQUVHLEdBQUdGLEdBQU1sQixZQUFjdUIsRUFDekJOLEVBQUVHLEdBQUdGLEdBQU0rRSxXQUFhLFdBRXBCLE1BREFoRixHQUFFRyxHQUFHRixHQUFRQyxFQUNOSSxFQUFvQnlFLG1CQUdoQ0UsU0Y0RkcsU0FBVTVILEVBQVFELEVBQVNILEdHdlFqQ0ksRUFBQUQsUUFBQUgsRUFBQTBCLEVBQUEsa0JINlFNLFNBQVV0QixFQUFRRCxFQUFTSCxHSTdRakNJLEVBQUFELFFBQUFILEVBQUEwQixFQUFBLGlCSm1STSxTQUFVdEIsRUFBUUQsRUFBU0gsR0tuUmpDSSxFQUFBRCxRQUFBSCxFQUFBMEIsRUFBQSxtQkx5Uk0sU0FBVXRCLEVBQVFELEVBQVNILEdNelJqQ0ksRUFBQUQsUUFBQUgsRUFBQTBCLEVBQUEsMkJOK1JNLFNBQVV0QixFQUFRRCxFQUFTSCxHQUVqQ0EsRUFBb0IsR0FDcEJBLEVBQW9CLEdBQ3BCQSxFQUFvQixHQUNwQkEsRUFBb0IsR0FDcEJJLEVBQU9ELFFBQVVILEVBQW9CIiwiZmlsZSI6ImlTY3JvbGxEcm9wZG93bk1lbnUuYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRpOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGw6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge31cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGlkZW50aXR5IGZ1bmN0aW9uIGZvciBjYWxsaW5nIGhhcm1vbnkgaW1wb3J0cyB3aXRoIHRoZSBjb3JyZWN0IGNvbnRleHRcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4vKioqKioqLyBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRcdGdldDogZ2V0dGVyXG4vKioqKioqLyBcdFx0XHR9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNSk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIGlTY3JvbGxEcm9wZG93bk1lbnUgPSBmdW5jdGlvbiAoJCkge1xuXG4gICAgdmFyIE5BTUUgPSAnaVNjcm9sbERyb3Bkb3duTWVudSc7XG4gICAgdmFyIERBVEFfS0VZID0gJ2lTY3JvbGxEcm9wZG93bk1lbnUnO1xuICAgIHZhciBKUVVFUllfTk9fQ09ORkxJQ1QgPSAkLmZuW05BTUVdO1xuXG4gICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICBzdGFydEF0SXRlbTogMFxuICAgIH07XG5cbiAgICB2YXIgaVNjcm9sbERyb3Bkb3duTWVudSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gaVNjcm9sbERyb3Bkb3duTWVudShlbGVtZW50LCBjb25maWcpIHtcbiAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBpU2Nyb2xsRHJvcGRvd25NZW51KTtcblxuICAgICAgICAgICAgdGhpcy5jb25maWcgPSB0aGlzLl9nZXRDb25maWcoY29uZmlnKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgICAgICB0aGlzLiRlbGVtZW50ID0gJCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy4kc2Nyb2xsZXIgPSB0aGlzLiRlbGVtZW50LmZpbmQoJy5zY3JvbGxlcicpO1xuICAgICAgICAgICAgdGhpcy5pU2Nyb2xsO1xuICAgICAgICAgICAgdGhpcy4kdWwgPSB0aGlzLiRzY3JvbGxlci5maW5kKCc+IHVsJyk7XG4gICAgICAgICAgICB0aGlzLiRpdGVtcyA9IHRoaXMuJHVsLmZpbmQoJz5saScpO1xuICAgICAgICAgICAgdGhpcy4kaXRlbXNEcm9wZG93bnMgPSB0aGlzLiRpdGVtcy5maWx0ZXIoJy5kcm9wZG93bicpO1xuICAgICAgICAgICAgdGhpcy4kZHJvcGRvd25NZW51cyA9IHRoaXMuJGl0ZW1zRHJvcGRvd25zLmZpbmQoJy5kcm9wZG93bi1tZW51Jyk7XG4gICAgICAgICAgICB0aGlzLiRkcm9wZG93bk1lbnVzV3JhcHBlcjtcbiAgICAgICAgICAgIHRoaXMuJHN0YXJ0SXRlbSA9IHRoaXMuJHVsLmZpbmQoJ2xpOmVxKCcgKyB0aGlzLmNvbmZpZy5zdGFydEF0SXRlbSArICcpJyk7XG4gICAgICAgICAgICB0aGlzLiRpbmRpY2F0b3IgPSB0aGlzLiRlbGVtZW50LmZpbmQoJy5pbmRpY2F0b3InKTtcblxuICAgICAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBfY3JlYXRlQ2xhc3MoaVNjcm9sbERyb3Bkb3duTWVudSwgW3tcbiAgICAgICAgICAgIGtleTogJ2luaXQnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICB0aGlzLiRpdGVtc0Ryb3Bkb3ducy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1JZCA9ICdpdGVtJyArICQodGhpcykuaW5kZXgoKTtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5kYXRhKCdpZCcsIGl0ZW1JZCkuYXR0cignZGF0YS1pZCcsIGl0ZW1JZCk7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnLmRyb3Bkb3duLW1lbnUnKS5kYXRhKCdwYXJlbnQnLCBpdGVtSWQpLmF0dHIoJ2RhdGEtaWQnLCBpdGVtSWQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuJGRyb3Bkb3duTWVudXNXcmFwcGVyID0gJCgnPGRpdiBjbGFzcz1cImlTY3JvbGxEcm9wZG93bk1lbnUtZHJvcGRvd25zXCI+PC9kaXY+Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWxlbWVudC5hZnRlcih0aGlzLiRkcm9wZG93bk1lbnVzV3JhcHBlcik7XG4gICAgICAgICAgICAgICAgdGhpcy4kZHJvcGRvd25NZW51c1dyYXBwZXIuYXBwZW5kKHRoaXMuJGRyb3Bkb3duTWVudXMpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy4kZHJvcGRvd25NZW51cy5maW5kKCdbZGF0YS10b2dnbGU9Y2xvc2VdJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuZHJvcGRvd24tbWVudScpLnNsaWRlVXAoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUaW1lb3V0IHJlcXVpcmVkIHRvIGF2b2lkIGJ1Z3Mgd2l0aCBpU2Nyb2xsIGxhdGUgaW5pdGlhbGl6YXRpb24uLi5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi4kc2Nyb2xsZXIud2lkdGgoc2VsZi5nZXRJdGVtc1dpZHRoKCkpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmlTY3JvbGwgPSBuZXcgSVNjcm9sbChzZWxmLmVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50UGFzc3Rocm91Z2g6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxYOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsWTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBib3VuY2VFYXNpbmc6ICdxdWFkcmF0aWMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgc25hcDogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaVNjcm9sbC5zY3JvbGxUb0VsZW1lbnQoc2VsZi4kc3RhcnRJdGVtLmdldCgwKSwgMTI1KTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi50b2dnbGVJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgICAgICAgICAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRvZ2dsZUluZGljYXRvcigpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBzZWxmLmluZGljYXRvckxvb3BBbmltYXRpb24oMTAsIDUwMCk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaVNjcm9sbC5vbignc2Nyb2xsU3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLiRpbmRpY2F0b3IuZmFkZU91dCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LCA1MDApO1xuXG4gICAgICAgICAgICAgICAgdGhpcy4kaXRlbXMub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJz4gYScpLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy4kaXRlbXMuZmluZCgnPiBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiRkcm9wZG93bk1lbnVzV3JhcHBlci5maW5kKCdkaXYnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkbGlQYXJlbnQgPSAkKHRoaXMpLnBhcmVudCgnbGknKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pU2Nyb2xsLnNjcm9sbFRvRWxlbWVudCgkbGlQYXJlbnQuZ2V0KDApLCA1MDApO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiRpdGVtcy5yZW1vdmVDbGFzcygnYmVmb3JlQWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuJGl0ZW1zLm5vdCgkbGlQYXJlbnQpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgJGxpUGFyZW50LnByZXYoKS5hZGRDbGFzcygnYmVmb3JlQWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICRsaVBhcmVudC5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkbGlQYXJlbnQuaGFzQ2xhc3MoJ2Ryb3Bkb3duJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtSWQgPSAkbGlQYXJlbnQuZGF0YSgnaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuJGRyb3Bkb3duTWVudXNXcmFwcGVyLmZpbmQoJ2RpdltkYXRhLWlkPScgKyBpdGVtSWQgKyAnXScpLnNsaWRlRG93bigpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9IHRoaXMuaHJlZjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICd0b2dnbGVJbmRpY2F0b3InLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvZ2dsZUluZGljYXRvcigpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaVNjcm9sbC5oYXNIb3Jpem9udGFsU2Nyb2xsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGluZGljYXRvci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kaW5kaWNhdG9yLnNob3coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIGtleTogJ2luZGljYXRvckxvb3BBbmltYXRpb24nLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluZGljYXRvckxvb3BBbmltYXRpb24ob2Zmc2V0LCBkdXJhdGlvbikge1xuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgICAgICB0aGlzLiRpbmRpY2F0b3IuZmluZCgnLmZhJykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAnKz0nICsgb2Zmc2V0XG4gICAgICAgICAgICAgICAgfSwgZHVyYXRpb24sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAnLT0nICsgb2Zmc2V0XG4gICAgICAgICAgICAgICAgICAgIH0sIGR1cmF0aW9uLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmluZGljYXRvckxvb3BBbmltYXRpb24ob2Zmc2V0LCBkdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICBrZXk6ICdnZXRJdGVtc1dpZHRoJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJdGVtc1dpZHRoKCkge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtc1dpZHRoID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLiRpdGVtcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXNXaWR0aCArPSAkKHRoaXMpLm91dGVyV2lkdGgoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbXNXaWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAga2V5OiAnX2dldENvbmZpZycsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldENvbmZpZyhjb25maWcpIHtcbiAgICAgICAgICAgICAgICBjb25maWcgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIGNvbmZpZyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfV0sIFt7XG4gICAgICAgICAgICBrZXk6ICdfalF1ZXJ5SW50ZXJmYWNlJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfalF1ZXJ5SW50ZXJmYWNlKGNvbmZpZykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YSA9ICR0aGlzLmRhdGEoREFUQV9LRVkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgX2tpa29vID0gJC5leHRlbmQoe30sIGRlZmF1bHRzLCAkdGhpcy5kYXRhKCksICh0eXBlb2YgY29uZmlnID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihjb25maWcpKSA9PT0gJ29iamVjdCcgJiYgY29uZmlnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEgJiYgL2Rpc3Bvc2UvLnRlc3QoY29uZmlnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBuZXcgaVNjcm9sbERyb3Bkb3duTWVudSh0aGlzLCBfa2lrb28pO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZGF0YShEQVRBX0tFWSwgZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhW2NvbmZpZ10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gbWV0aG9kIG5hbWVkIFwiJyArIGNvbmZpZyArICdcIicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtjb25maWddKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfV0pO1xuXG4gICAgICAgIHJldHVybiBpU2Nyb2xsRHJvcGRvd25NZW51O1xuICAgIH0oKTtcblxuICAgIC8qKlxuICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAqIGpRdWVyeVxuICAgICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAqL1xuXG4gICAgJC5mbltOQU1FXSA9IGlTY3JvbGxEcm9wZG93bk1lbnUuX2pRdWVyeUludGVyZmFjZTtcbiAgICAkLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gaVNjcm9sbERyb3Bkb3duTWVudTtcbiAgICAkLmZuW05BTUVdLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG4gICAgICAgIHJldHVybiBpU2Nyb2xsRHJvcGRvd25NZW51Ll9qUXVlcnlJbnRlcmZhY2U7XG4gICAgfTtcbiAgICByZXR1cm4gaVNjcm9sbERyb3Bkb3duTWVudTtcbn0oalF1ZXJ5KTtcblxuLyoqKi8gfSksXG4vKiAxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJkZW1vLWJhc2ljLmNzc1wiO1xuXG4vKioqLyB9KSxcbi8qIDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxubW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcImRlbW8tcGluay5jc3NcIjtcblxuLyoqKi8gfSksXG4vKiAzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJkZW1vLXB1cnBsZS5jc3NcIjtcblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJpU2Nyb2xsRHJvcGRvd25NZW51LmNzc1wiO1xuXG4vKioqLyB9KSxcbi8qIDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbl9fd2VicGFja19yZXF1aXJlX18oNCk7XG5fX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcbm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGlTY3JvbGxEcm9wZG93bk1lbnUuYnVuZGxlLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gaWRlbnRpdHkgZnVuY3Rpb24gZm9yIGNhbGxpbmcgaGFybW9ueSBpbXBvcnRzIHdpdGggdGhlIGNvcnJlY3QgY29udGV4dFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA1KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCBkZDMyYmI4MjYwMTZiNzM1YmUxNCIsImNvbnN0IGlTY3JvbGxEcm9wZG93bk1lbnUgPSAoKCQpID0+IHtcblxuICAgIGNvbnN0IE5BTUUgPSAnaVNjcm9sbERyb3Bkb3duTWVudSc7XG4gICAgY29uc3QgREFUQV9LRVkgPSAnaVNjcm9sbERyb3Bkb3duTWVudSc7XG4gICAgY29uc3QgSlFVRVJZX05PX0NPTkZMSUNUID0gJC5mbltOQU1FXTtcblxuICAgIGNvbnN0IGRlZmF1bHRzID0ge1xuICAgICAgICBzdGFydEF0SXRlbTogMCxcbiAgICB9O1xuXG4gICAgY2xhc3MgaVNjcm9sbERyb3Bkb3duTWVudSB7XG4gICAgICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIGNvbmZpZykge1xuICAgICAgICAgICAgdGhpcy5jb25maWcgPSB0aGlzLl9nZXRDb25maWcoY29uZmlnKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgICAgICB0aGlzLiRlbGVtZW50ID0gJCh0aGlzLmVsZW1lbnQpO1xuICAgICAgICAgICAgdGhpcy4kc2Nyb2xsZXIgPSB0aGlzLiRlbGVtZW50LmZpbmQoJy5zY3JvbGxlcicpO1xuICAgICAgICAgICAgdGhpcy5pU2Nyb2xsO1xuICAgICAgICAgICAgdGhpcy4kdWwgPSB0aGlzLiRzY3JvbGxlci5maW5kKCc+IHVsJyk7XG4gICAgICAgICAgICB0aGlzLiRpdGVtcyA9IHRoaXMuJHVsLmZpbmQoJz5saScpO1xuICAgICAgICAgICAgdGhpcy4kaXRlbXNEcm9wZG93bnMgPSB0aGlzLiRpdGVtcy5maWx0ZXIoJy5kcm9wZG93bicpO1xuICAgICAgICAgICAgdGhpcy4kZHJvcGRvd25NZW51cyA9IHRoaXMuJGl0ZW1zRHJvcGRvd25zLmZpbmQoJy5kcm9wZG93bi1tZW51Jyk7XG4gICAgICAgICAgICB0aGlzLiRkcm9wZG93bk1lbnVzV3JhcHBlcjtcbiAgICAgICAgICAgIHRoaXMuJHN0YXJ0SXRlbSA9IHRoaXMuJHVsLmZpbmQoJ2xpOmVxKCcgKyB0aGlzLmNvbmZpZy5zdGFydEF0SXRlbSArICcpJyk7XG4gICAgICAgICAgICB0aGlzLiRpbmRpY2F0b3IgPSB0aGlzLiRlbGVtZW50LmZpbmQoJy5pbmRpY2F0b3InKTtcblxuICAgICAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBpbml0KCkge1xuXG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMuJGl0ZW1zRHJvcGRvd25zLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBpdGVtSWQgPSAnaXRlbScgKyAkKHRoaXMpLmluZGV4KCk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5kYXRhKCdpZCcsIGl0ZW1JZCkuYXR0cignZGF0YS1pZCcsIGl0ZW1JZCk7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcuZHJvcGRvd24tbWVudScpLmRhdGEoJ3BhcmVudCcsIGl0ZW1JZCkuYXR0cignZGF0YS1pZCcsIGl0ZW1JZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuJGRyb3Bkb3duTWVudXNXcmFwcGVyID0gJCgnPGRpdiBjbGFzcz1cImlTY3JvbGxEcm9wZG93bk1lbnUtZHJvcGRvd25zXCI+PC9kaXY+Jyk7XG4gICAgICAgICAgICB0aGlzLiRlbGVtZW50LmFmdGVyKHRoaXMuJGRyb3Bkb3duTWVudXNXcmFwcGVyKTtcbiAgICAgICAgICAgIHRoaXMuJGRyb3Bkb3duTWVudXNXcmFwcGVyLmFwcGVuZCh0aGlzLiRkcm9wZG93bk1lbnVzKTtcblxuICAgICAgICAgICAgdGhpcy4kZHJvcGRvd25NZW51cy5maW5kKCdbZGF0YS10b2dnbGU9Y2xvc2VdJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuY2xvc2VzdCgnLmRyb3Bkb3duLW1lbnUnKS5zbGlkZVVwKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaW1lb3V0IHJlcXVpcmVkIHRvIGF2b2lkIGJ1Z3Mgd2l0aCBpU2Nyb2xsIGxhdGUgaW5pdGlhbGl6YXRpb24uLi5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2VsZi4kc2Nyb2xsZXIud2lkdGgoc2VsZi5nZXRJdGVtc1dpZHRoKCkpO1xuICAgICAgICAgICAgICAgIHNlbGYuaVNjcm9sbCA9IG5ldyBJU2Nyb2xsKHNlbGYuZWxlbWVudCwge1xuICAgICAgICAgICAgICAgICAgICBldmVudFBhc3N0aHJvdWdoOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxYOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxZOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBib3VuY2VFYXNpbmc6ICdxdWFkcmF0aWMnLFxuICAgICAgICAgICAgICAgICAgICBzbmFwOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzZWxmLmlTY3JvbGwuc2Nyb2xsVG9FbGVtZW50KHNlbGYuJHN0YXJ0SXRlbS5nZXQoMCksIDEyNSk7XG4gICAgICAgICAgICAgICAgc2VsZi50b2dnbGVJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgICAgICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi50b2dnbGVJbmRpY2F0b3IoKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHNlbGYuaW5kaWNhdG9yTG9vcEFuaW1hdGlvbigxMCwgNTAwKTtcbiAgICAgICAgICAgICAgICBzZWxmLmlTY3JvbGwub24oJ3Njcm9sbFN0YXJ0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiRpbmRpY2F0b3IuZmFkZU91dCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgNTAwKTtcblxuICAgICAgICAgICAgdGhpcy4kaXRlbXMub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnPiBhJykudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy4kaXRlbXMuZmluZCgnPiBhJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICBzZWxmLiRkcm9wZG93bk1lbnVzV3JhcHBlci5maW5kKCdkaXYnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgdmFyICRsaVBhcmVudCA9ICQodGhpcykucGFyZW50KCdsaScpO1xuICAgICAgICAgICAgICAgIHNlbGYuaVNjcm9sbC5zY3JvbGxUb0VsZW1lbnQoJGxpUGFyZW50LmdldCgwKSwgNTAwKTtcbiAgICAgICAgICAgICAgICBzZWxmLiRpdGVtcy5yZW1vdmVDbGFzcygnYmVmb3JlQWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgc2VsZi4kaXRlbXMubm90KCRsaVBhcmVudCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICRsaVBhcmVudC5wcmV2KCkuYWRkQ2xhc3MoJ2JlZm9yZUFjdGl2ZScpO1xuICAgICAgICAgICAgICAgICRsaVBhcmVudC5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgaWYgKCRsaVBhcmVudC5oYXNDbGFzcygnZHJvcGRvd24nKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbUlkID0gJGxpUGFyZW50LmRhdGEoJ2lkJyk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuJGRyb3Bkb3duTWVudXNXcmFwcGVyLmZpbmQoJ2RpdltkYXRhLWlkPScgKyBpdGVtSWQgKyAnXScpLnNsaWRlRG93bigpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSB0aGlzLmhyZWY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIHRvZ2dsZUluZGljYXRvcigpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pU2Nyb2xsLmhhc0hvcml6b250YWxTY3JvbGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRpbmRpY2F0b3IuaGlkZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRpbmRpY2F0b3Iuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaW5kaWNhdG9yTG9vcEFuaW1hdGlvbihvZmZzZXQsIGR1cmF0aW9uKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLiRpbmRpY2F0b3IuZmluZCgnLmZhJykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgcmlnaHQ6ICcrPScgKyBvZmZzZXRcbiAgICAgICAgICAgIH0sIGR1cmF0aW9uLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6ICctPScgKyBvZmZzZXRcbiAgICAgICAgICAgICAgICB9LCBkdXJhdGlvbiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmluZGljYXRvckxvb3BBbmltYXRpb24ob2Zmc2V0LCBkdXJhdGlvbik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGdldEl0ZW1zV2lkdGgoKSB7XG4gICAgICAgICAgICB2YXIgaXRlbXNXaWR0aCA9IDA7XG4gICAgICAgICAgICB0aGlzLiRpdGVtcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpdGVtc1dpZHRoICs9ICQodGhpcykub3V0ZXJXaWR0aCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gaXRlbXNXaWR0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIF9nZXRDb25maWcoY29uZmlnKSB7XG4gICAgICAgICAgICBjb25maWcgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIGNvbmZpZyk7XG4gICAgICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhdGljIF9qUXVlcnlJbnRlcmZhY2UoY29uZmlnKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBsZXQgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgIGxldCBkYXRhID0gJHRoaXMuZGF0YShEQVRBX0tFWSk7XG4gICAgICAgICAgICAgICAgbGV0IF9raWtvbyA9ICQuZXh0ZW5kKHt9LFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0cyxcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuZGF0YSgpLFxuICAgICAgICAgICAgICAgICAgICB0eXBlb2YgY29uZmlnID09PSAnb2JqZWN0JyAmJiBjb25maWdcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhICYmIC9kaXNwb3NlLy50ZXN0KGNvbmZpZykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBuZXcgaVNjcm9sbERyb3Bkb3duTWVudSh0aGlzLCBfa2lrb28pO1xuICAgICAgICAgICAgICAgICAgICAkdGhpcy5kYXRhKERBVEFfS0VZLCBkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbY29uZmlnXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIG1ldGhvZCBuYW1lZCBcIiR7Y29uZmlnfVwiYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZGF0YVtjb25maWddKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKiBqUXVlcnlcbiAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKi9cblxuICAgICQuZm5bTkFNRV0gPSBpU2Nyb2xsRHJvcGRvd25NZW51Ll9qUXVlcnlJbnRlcmZhY2U7XG4gICAgJC5mbltOQU1FXS5Db25zdHJ1Y3RvciA9IGlTY3JvbGxEcm9wZG93bk1lbnU7XG4gICAgJC5mbltOQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkLmZuW05BTUVdID0gSlFVRVJZX05PX0NPTkZMSUNUO1xuICAgICAgICByZXR1cm4gaVNjcm9sbERyb3Bkb3duTWVudS5falF1ZXJ5SW50ZXJmYWNlO1xuICAgIH07XG4gICAgcmV0dXJuIGlTY3JvbGxEcm9wZG93bk1lbnU7XG59KShqUXVlcnkpO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9pU2Nyb2xsRHJvcGRvd25NZW51LmpzIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiZGVtby1iYXNpYy5jc3NcIjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9kZW1vLWJhc2ljLnNjc3Ncbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiZGVtby1waW5rLmNzc1wiO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2RlbW8tcGluay5zY3NzXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImRlbW8tcHVycGxlLmNzc1wiO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2RlbW8tcHVycGxlLnNjc3Ncbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiaVNjcm9sbERyb3Bkb3duTWVudS5jc3NcIjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9pU2Nyb2xsRHJvcGRvd25NZW51LnNjc3Ncbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==